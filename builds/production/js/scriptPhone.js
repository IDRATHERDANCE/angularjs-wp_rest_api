var angular=require("angular"),ngRoute=require("angular-route"),ngAnimate=require("angular-animate"),ngResource=require("angular-resource"),ngSanitize=require("angular-sanitize"),WpApp=angular.module("WpApp",["ngRoute","ngAnimate","ngResource","ngSanitize","ngLocationUpdate"]);!function(e){"use strict";e.module("ngLocationUpdate",[]).run(["$route","$rootScope","$location",function(e,t,n){n.update_path=function(i,o){if(n.path()!=i){var r=e.current;t.$on("$locationChangeSuccess",function(){r&&(e.current=r,r=null)}),n.path(i),o||n.replace()}}}])}(window.angular),WpApp.factory("mainData",["$http",function(e){return{responseFunction:function(){return e.get("http://ninalieven.net/wordpress/wp-json/posts?type[]=page&type[]=post",{cache:!0})}}}]),WpApp.service("menuData",["mainData",function(e){this.getMenuItems=function(){return e.responseFunction(function(e){}).then(function(e){for(var t=e.data,n=[],i=[],o="",r=0;r<t.length;r++){if("page"==t[r].type){var a=t[r].title.replace(/\s+/g,"-").toLowerCase(),s=t[r].title,c=t[r].meta.hover_photo.url;n.push({pages_string:'<div class="projects '+a+'" ng-class="{\''+a+'_home\':homeclass}"><div class=hover_ph ng-class="{\'hov_show\':homeclass}"><img  /></div><p class="pro_p_'+a+'" ng-class="{\'pro_p_'+a+'_home\':homeclass}"><a menu-items-hover="'+c+'" ng-href="'+a+'">'+s+"</a></p>",page_title_slug:a})}if("post"==t[r].type){var l=t[r].title.replace(/\s+/g,"-").toLowerCase(),u=t[r].title,p=t[r].meta.hover_photo.url,d=t[r].terms.category[0].slug;i.push({posts_string:'<div class="posts" id="'+l+'"><div class="hover_ph" ng-class="{\'hov_show\':homeclass}"><img /></div><p class="post_p_'+l+'" ng-class="{\'post_p_'+l+'_home\':homeclass}"><a menu-items-hover="'+p+'" ng-href="'+d+"/"+l+'">'+u+"</a></p></div>",post_category:d})}}for(var r=0;r<n.length;r++)for(var h=0;h<i.length;h++)n[r].page_title_slug===i[h].post_category?n[r].pages_string=n[r].pages_string+i[h].posts_string:n[r].pages_string=n[r].pages_string;for(var r=0;r<n.length;r++)o+=n[r].pages_string+"</div>";return o})}}]),WpApp.service("contentData",["$location","mainData",function(e,t){this.getContent=function(){return t.responseFunction(function(e){}).then(function(t){var n=t.data,i=e.url().slice(1).replace(/\/[^\/]+$/,""),o="",r="",a="";$(".page_content").addClass("page"+i),$(".page").addClass(i);for(var s=0;s<n.length;s++){if("page"==n[s].type&&n[s].title.replace(/\s+/g,"-").toLowerCase()==i){var c=n[s].content;c=c.indexOf("<!--more-->")>-1?"<p><b menu-animation="+i+' class="main_head">'+n[s].title+"</b>"+c.replace(/<!--more-->/g,"<br><em class=readmore>read more</em>"):"<p><b menu-animation="+i+' class="main_head">'+n[s].title+"</b>"+c,r=content_string_assemble(c,i)}if("post"==n[s].type&&n[s].terms.category[0].slug==i){var l=n[s].content;l=l.indexOf("<!--more-->")>-1?"<p><b menu-animation="+n[s].title.replace(/\s+/g,"-").toLowerCase()+' class="main_head">'+n[s].title+"</b>"+l.replace(/<!--more-->/g,"<br><em class=readmore>read more</em>"):"<p><b menu-animation="+n[s].title.replace(/\s+/g,"-").toLowerCase()+' class="main_head">'+n[s].title+"</b>"+l,a+=content_string_assemble(l,i)}o=r+a}return'<div class="page_content" last-margin>'+o+"</div>"})}}]),WpApp.service("menuDataPhone",["mainData",function(e){this.getMenuItemsPhone=function(){return e.responseFunction(function(e){}).then(function(e){for(var t=e.data,n="",i=0,o=0;i<t.length;i++)if("page"==t[i].type){var r=t[i].title.replace(/\s+/g,"-").toLowerCase(),a=t[i].title,s=t[i].meta.hover_photo.url;n+='<div phone-menu-animation phone-menu-css="'+o+'" menu-item-name='+r+' class="projects phone '+r+'"><a ng-href='+r+'><div class="over"></div><p class="pro_p">'+a+'</p><div class="arrow"><img src="images/right_arrow-128.png" /></div><div class="hover_ph phone"><img ng-src="'+s+'" /></div><div class="under"></div></a></div>',o++}return n})}}]),WpApp.service("menuCurrentPhone",["$location","mainData",function(e,t){this.getCurrentMenuItemPhone=function(){return t.responseFunction(function(e){}).then(function(t){for(var n=t.data,i=null,o=e.url().slice(1).replace(/\/[^\/]+$/,""),r=0,a=0;r<n.length;r++)if("page"==n[r].type){var s=n[r].title.replace(/\s+/g,"-").toLowerCase();o===s&&(i=a),a++}return i})}}]),WpApp.config(["$routeProvider","$locationProvider","$httpProvider",function(e,t,n){e.when("/",{templateUrl:"/part/home.html",controller:"routCtrl"}).when("/:page",{templateUrl:"/part/page.html",controller:"routCtrl"}).when("/:page/:post",{templateUrl:"/part/page.html",controller:"routCtrl"}).otherwise({redirectTo:"/part/home.html"}),t.html5Mode(!0).hashPrefix("!")}]),WpApp.controller("routCtrl",function(e,t,n,i,o,r){o.getMenuItemsPhone().then(function(e){t.menuPhoneHTML=e}),r.getContent().then(function(t){e.contentHTML=t})}),WpApp.directive("menuPhone",function(e){return function(t,n,i){t.$watch(i.menuPhone,function(i){n.html(i),e(n.contents())(t)})}}),WpApp.directive("wholeContent",function(e){return function(t,n,i){t.$watch(i.wholeContent,function(i){n.html(i),e(n.contents())(t)})}}),WpApp.directive("singleBlock",function(){return function(e,t,n){""===t.find("p").text()&&t.find("p").remove(),void 0!==t.find("a").attr("href")&&"http://ninalieven.net/wordpress/"===t.find("a").attr("href").substring(0,32)&&t.find("a").contents().unwrap(),t.find("a").attr("target","_blank"),t.find(".wp-caption-text").insertAfter(t.find(".wp-caption-text").parent().parent()),t.find("img").parent().hasClass("more")&&t.find("img").unwrap()}}),WpApp.directive("iframe",function(e){return function(t,n){var i=angular.element(e),o=n.find("iframe").attr("width"),r=n.find("iframe").attr("height");t.getWindowDimensions=function(){return{ww:i[0].innerWidth}},t.$watch(t.getWindowDimensions,function(e,t){var i=.7*e.ww*r/o;angular.forEach(n,function(e){angular.element(e).css({height:i})})},!0),i.bind("resize",function(){t.$apply()})}}),WpApp.directive("imgFix",function(e){return function(t,n,i){var o=angular.element(e).width(),r=n.find(".wp-caption"),a=n.find("img"),s=a.attr("width"),c=a.attr("height"),l=o*c/s,u=0;r.css("width","100%"),n.css("height",l);var p=function(){a.css({position:"relative",width:"250%","max-width":"250%","min-width":"250%"}),r.css({overflow:"auto"}),r.scrollTop(r.height()/2).scrollLeft(r.width()/2)},d=function(){a.css({position:"static",width:"100%","max-width":"100%","min-width":"100%"}),r.css({overflow:"hidden"})};n.bind("doubletap",function(){u+=1,u%=2,1==u?p():d()}),n.bind("pinchopen",function(){alert("open"),p()}),n.bind("pinchclose",function(){d()})}}),WpApp.directive("textBlock",function(e){return function(e,t){t.find("br").replaceWith('<p class="specialps"></p>')}}),WpApp.directive("textLanguage",function(){return function(e,t,n){var i=t.find("span"),o=t.find(".main_head");t.find("p");i.css("text-decoration","none"),o.insertBefore(o.parent()),german_language_string(t),route_language_change(t);var r=t.find(".readmore");r.bind("click",function(){r.parent().find(".more").slideDown(1200,function(){r.parent().find(".more").contents().unwrap()}),r.slideUp(1200),r.prev().slideUp(1200)})}}),WpApp.directive("languageButton",function(){return function(e,t,n){var i=0;t.bind("click",function(){i+=1,i%=2,$(".english").each(function(){1===i?(t.text("en"),$(".readmore").text("mehr lesen"),$(this).next().hasClass("german")&&($(this).addClass("displaynone"),$(this).next().removeClass("displaynone"))):(t.text("de"),$(".readmore").text("read more"),$(this).next().hasClass("german")&&($(this).removeClass("displaynone"),$(this).next().addClass("displaynone")))})})}}),WpApp.directive("phoneMenuCss",function(e,t,n,i,o){var r=i.url().slice(1).replace(/\/[^\/]+$/,"");return function(t,i,a){var s=angular.element(e),c=i.parent().find(".projects"),l=c.size();t.getWindowDimensions=function(){return{wh:s.height()}},t.$watch(t.getWindowDimensions,function(e,t){var s=Math.ceil(e.wh/l);i.css("height",s),$(".change_language").css({top:s+10,display:"block"}),i.find(".arrow").css({top:.25*s,width:.5*s}),i.find("p").css({"padding-top":.25*s}),void 0!==n.page&&n.page===r?o.getCurrentMenuItemPhone().then(function(e){phone_menu(i,n.page,a.phoneMenuCss,a.menuItemName,s,e,0)}):void 0===n.page&&""===r&&i.css({top:a.phoneMenuCss*s})},!0),s.bind("resize",function(){t.$apply()})}}),WpApp.directive("phoneMenuAnimation",function(e,t,n,i,o,r){var a=i.url().slice(1).replace(/\/[^\/]+$/,"");return function(e,t,i){r(function(){void 0!==n.page&&n.page===a&&o.getCurrentMenuItemPhone().then(function(e){phone_menu(t,n.page,i.phoneMenuCss,i.menuItemName,t.context.clientHeight,e,800)}),e.$on("$routeChangeStart",function(e,r){void 0===r.params.page&&void 0!==n.page?phone_menu_home(t,i.phoneMenuCss,t.context.clientHeight,i.menuItemName):o.getCurrentMenuItemPhone().then(function(e){phone_menu(t,r.params.page,i.phoneMenuCss,i.menuItemName,t.context.clientHeight,e,800)})})},0)}});var $=require("jquery"),content_string_assemble=function(e,t){for(var n=[],i=[],o="",e=$(e),r=0;r<e.length;r++)if("#text"!=e[r].nodeName&&($(e[r]).context.innerHTML.indexOf("img")>-1&&($(e[r]).context.innerHTML.indexOf("wp-caption-text")>-1?$(e[r]).find("img").parent().parent().wrap("<div class='wp-caption'></div>"):$(e[r]).find("img").wrap("<div class='wp-caption'></div>")),$(e[r]).context.innerHTML.indexOf("iframe")>-1&&$(e[r]).find("iframe").wrap("<div class='wp-caption'></div>"),$(e[r]).context.innerHTML.indexOf("img")>-1&&-1==$(e[r]).context.innerHTML.indexOf("main_head")&&n.push({el:"<div class=pstog single-block img-fix iframe-scroll>"+$(e[r]).context.outerHTML,ind:"ima"}),$(e[r]).context.innerHTML.indexOf("iframe")>-1&&-1==$(e[r]).context.innerHTML.indexOf("main_head")&&n.push({el:"<div class=pstog single-block iframe iframe-scroll>"+$(e[r]).context.outerHTML,ind:"ima"}),"p"==$(e[r]).context.localName&&"&nbsp;"!=$(e[r]).context.innerHTML&&-1==$(e[r]).context.innerHTML.indexOf("img")&&-1==$(e[r]).context.innerHTML.indexOf("iframe")))if((null==$(e[r]).context.previousElementSibling||"&nbsp;"==$(e[r]).context.previousElementSibling.innerHTML||$(e[r]).context.previousElementSibling.innerHTML.indexOf("img")>-1||$(e[r]).context.previousElementSibling.innerHTML.indexOf("iframe")>-1)&&(null!=$(e[r]).context.nextElementSibling&&"&nbsp;"!=$(e[r]).context.nextElementSibling.innerHTML&&"p"==$(e[r]).context.nextElementSibling.localName||null==$(e[r]).context.nextElementSibling||"&nbsp;"==$(e[r]).context.nextElementSibling.innerHTML||$(e[r]).context.nextElementSibling.innerHTML.indexOf("img")>-1||$(e[r]).context.nextElementSibling.innerHTML.indexOf("iframe")>-1))GetIEVersion()>0||/Edge\/\d+/i.test(navigator.userAgent)?n.push({el:'<div class="pstog'+r+"-"+t+' text_box" text-block text-language iframe-scroll><p class="english" extra-margin'+$(e[r]).context.outerHTML.substr(2)+"</b>",ind:r}):n.push({el:'<div class="pstog'+r+"-"+t+' text_box" text-block text-language iframe-scroll><p class="english" extra-margin'+$(e[r]).context.outerHTML.substr(2),ind:r});else{var a=$(e[r]).context.outerHTML,s=a.substring(3,a.length-4);i.push({el:s,ind:r})}for(var c=[],l=n.length-1;l>=0;l--)"ima"!=n[l].ind&&c.push(n[l].ind);for(var u=c,p=null,d=[],h=0;h<i.length;h++){var m=i[h].ind;$.each(u,function(){m>=this&&(null==p||m-p>m-this)&&(p=this)}),d.push({index:p,element:i[h].el})}for(var g=0;g<n.length;g++)for(var f=0;f<d.length;f++)d[f].index==n[g].ind?n[g].el=n[g].el.slice(0,-4)+"<br>"+d[f].element.replace('<em class="readmore">read more</em>','<em class="readmore">read more</em><em class=more>')+"</p>":n[g].el=n[g].el;for(var g=0;g<n.length;g++)o+=n[g].el+"</em></div>";return o},move_left=function(e,t,n,i){t===e&&(navigator.userAgent.toLowerCase().indexOf("chrome")>-1?$("body").delay(i).animate({scrollLeft:n-200},1e3):$("body, html").delay(i).animate({scrollLeft:n-200},1e3))},getRows=function(e,t){var n=e,i=$(t).css("font-size"),o=1.15,r=Math.floor(parseInt(i)*o),a=n/r;return num_rows=Math.round(a)},phone_menu=function(e,t,n,i,o,r,a){$("section").css("margin-top",o+20);var s=parseInt(n);r===s?(e.find("a").attr("href",""),e.find(".arrow").addClass("arr_down"),e.animate({top:0},a,function(){e.find("a").attr("href","/")})):s>r?e.animate({top:$(window).height()+o*s},a):e.animate({top:-((r-s)*o)},a)},phone_menu_home=function(e,t,n,i){$("section").css("margin-top",0),e.find(".arrow").removeClass("arr_down"),e.animate({top:n*t},1e3,function(){e.find("a").attr("href",i)})},route_language_change=function(e){"de"===$(".change_language").text()?null!==e.find(".english")[0].nextSibling&&(e.find(".german").addClass("displaynone"),e.find(".english").removeClass("displaynone")):null!==e.find(".english")[0].nextSibling&&(e.find(".english").addClass("displaynone"),e.find(".german").removeClass("displaynone"))},german_language_string=function(e){var t=e[0].innerHTML,n=t.substring(t.indexOf("<br><span"));if('<p class="english" extra-margin=""></p>'===t.slice(-39))var i="";else if(n.indexOf("<br><span")>-1){var i=t.substring(t.indexOf('<p class="english" extra-margin="">')+35,t.indexOf("<br><span"));if(e.children().hasClass("main_head")===!1)var o='<p class="german">'+n.substr(4);else var o='<p class="german">'+n;e.find(".english").empty().append(i).after(o)}else{var i=t.substring(t.indexOf('<p class="english" extra-margin="">')+35);e.find(".english").empty().append(i)}},german_language_stringIE=function(e){var t=e[0].innerHTML,n=t.substring(t.indexOf("<br><span"));if('<p class="english" extra-margin=""></p>'===t.slice(-39))var i="";else if(n.indexOf("<br><span")>-1){var i=t.substring(t.indexOf('<p class="english" extra-margin="">')+35,t.indexOf("<br><span")),o='<p class="german">'+n;e.find(".english").empty().append(i).after(o);for(var r=e.context.children[1].children,a=0;a<r.length;a++)"SPAN"===$(r[a]).context.nodeName&&r[a].remove()}else{var i=t.substring(t.indexOf('<p class="english" extra-margin="">')+35);e.find(".english").empty().append(i)}};!function(){"use strict";function e(t,i){function o(e,t){return function(){return e.apply(t,arguments)}}var r;if(i=i||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=i.touchBoundary||10,this.layer=t,this.tapDelay=i.tapDelay||200,this.tapTimeout=i.tapTimeout||700,!e.notNeeded(t)){for(var a=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],s=this,c=0,l=a.length;l>c;c++)s[a[c]]=o(s[a[c]],s);n&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,i){var o=Node.prototype.removeEventListener;"click"===e?o.call(t,e,n.hijacked||n,i):o.call(t,e,n,i)},t.addEventListener=function(e,n,i){var o=Node.prototype.addEventListener;"click"===e?o.call(t,e,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),i):o.call(t,e,n,i)}),"function"==typeof t.onclick&&(r=t.onclick,t.addEventListener("click",function(e){r(e)},!1),t.onclick=null)}}var t=navigator.userAgent.indexOf("Windows Phone")>=0,n=navigator.userAgent.indexOf("Android")>0&&!t,i=/iP(ad|hone|od)/.test(navigator.userAgent)&&!t,o=i&&/OS 4_\d(_\d)?/.test(navigator.userAgent),r=i&&/OS [6-7]_\d/.test(navigator.userAgent),a=navigator.userAgent.indexOf("BB10")>0;e.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(i&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},e.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!n;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},e.prototype.sendClick=function(e,t){var n,i;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),i=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(e),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},e.prototype.determineEventType=function(e){return n&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},e.prototype.focus=function(e){var t;i&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},e.prototype.updateScrollParent=function(e){var t,n;if(t=e.fastClickScrollParent,!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},e.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},e.prototype.onTouchStart=function(e){var t,n,r;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],i){if(r=window.getSelection(),r.rangeCount&&!r.isCollapsed)return!0;if(!o){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},e.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n},e.prototype.onTouchMove=function(e){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},e.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},e.prototype.onTouchEnd=function(e){var t,a,s,c,l,u=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,a=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,r&&(l=e.changedTouches[0],u=document.elementFromPoint(l.pageX-window.pageXOffset,l.pageY-window.pageYOffset)||u,u.fastClickScrollParent=this.targetElement.fastClickScrollParent),s=u.tagName.toLowerCase(),"label"===s){if(t=this.findControl(u)){if(this.focus(u),n)return!1;u=t}}else if(this.needsFocus(u))return e.timeStamp-a>100||i&&window.top!==window&&"input"===s?(this.targetElement=null,!1):(this.focus(u),this.sendClick(u,e),i&&"select"===s||(this.targetElement=null,e.preventDefault()),!1);return i&&!o&&(c=u.fastClickScrollParent,c&&c.fastClickLastScrollTop!==c.scrollTop)?!0:(this.needsClick(u)||(e.preventDefault(),this.sendClick(u,e)),!1)},e.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},e.prototype.onMouse=function(e){return this.targetElement?e.forwardedTouchEvent?!0:e.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0:!0},e.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail?!0:(t=this.onMouse(e),t||(this.targetElement=null),t)},e.prototype.destroy=function(){var e=this.layer;n&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},e.notNeeded=function(e){var t,i,o,r;if("undefined"==typeof window.ontouchstart)return!0;if(i=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!n)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(i>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(a&&(o=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),o[1]>=10&&o[2]>=3&&(t=document.querySelector("meta[name=viewport]")))){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction||"manipulation"===e.style.touchAction?!0:(r=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],r>=27&&(t=document.querySelector("meta[name=viewport]"),t&&(-1!==t.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===e.style.touchAction||"manipulation"===e.style.touchAction)},e.attach=function(t,n){return new e(t,n)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return e}):"undefined"!=typeof module&&module.exports?(module.exports=e.attach,module.exports.FastClick=e):window.FastClick=e}(),function(e){e.event.special.doubletap={bindType:"touchend",delegateType:"touchend",handle:function(e){var t=e.handleObj,n=jQuery.data(e.target),i=(new Date).getTime(),o=n.lastTouch?i-n.lastTouch:0,r=null==r?300:r;r>o&&o>30?(n.lastTouch=null,e.type=t.origType,["clientX","clientY","pageX","pageY"].forEach(function(t){e[t]=e.originalEvent.changedTouches[0][t]}),t.handler.apply(this,arguments)):n.lastTouch=i}}}(jQuery);