var angular=require("angular"),ngRoute=require("angular-route"),ngAnimate=require("angular-animate"),ngResource=require("angular-resource"),ngSanitize=require("angular-sanitize"),WpApp=angular.module("WpApp",["ngRoute","ngAnimate","ngResource","ngSanitize","ngLocationUpdate"]);!function(e){"use strict";e.module("ngLocationUpdate",[]).run(["$route","$rootScope","$location",function(e,n,t){t.update_path=function(i,a){if(t.path()!=i){var r=e.current;n.$on("$locationChangeSuccess",function(){r&&(e.current=r,r=null)}),t.path(i),a||t.replace()}}}])}(window.angular),WpApp.factory("mainData",["$http",function(e){return{responseFunction:function(){return e.get("http://ninalieven.net/wordpress/wp-json/posts?type[]=page&type[]=post",{cache:!0})}}}]),WpApp.service("menuData",["mainData",function(e){this.getMenuItems=function(){return e.responseFunction(function(e){}).then(function(e){for(var n=e.data,t=[],i=[],a="",r=0;r<n.length;r++){if("page"==n[r].type){var s=n[r].title.replace(/\s+/g,"-").toLowerCase(),o=n[r].title,l=n[r].meta.hover_photo.url;t.push({pages_string:'<div class="projects '+s+'" ng-class="{\''+s+'_home\':homeclass}"><div class=hover_ph ng-class="{\'hov_show\':homeclass}"><img  /></div><p class="pro_p_'+s+'" ng-class="{\'pro_p_'+s+'_home\':homeclass}"><a menu-items-hover="'+l+'" ng-href="'+s+'">'+o+"</a></p>",page_title_slug:s})}if("post"==n[r].type){var c=n[r].title.replace(/\s+/g,"-").toLowerCase(),p=n[r].title,u=n[r].meta.hover_photo.url,d=n[r].terms.category[0].slug;i.push({posts_string:'<div class="posts" id="'+c+'"><div class="hover_ph" ng-class="{\'hov_show\':homeclass}"><img /></div><p class="post_p_'+c+'" ng-class="{\'post_p_'+c+'_home\':homeclass}"><a menu-items-hover="'+u+'" ng-href="'+d+"/"+c+'">'+p+"</a></p></div>",post_category:d})}}for(var r=0;r<t.length;r++)for(var g=0;g<i.length;g++)t[r].page_title_slug===i[g].post_category?t[r].pages_string=t[r].pages_string+i[g].posts_string:t[r].pages_string=t[r].pages_string;for(var r=0;r<t.length;r++)a+=t[r].pages_string+"</div>";return a})}}]),WpApp.service("contentData",["$location","mainData",function(e,n){this.getContent=function(){return n.responseFunction(function(e){}).then(function(n){var t=n.data,i=e.url().slice(1).replace(/\/[^\/]+$/,""),a="",r="",s="";$(".page_content").addClass("page"+i),$(".page").addClass(i);for(var o=0;o<t.length;o++){if("page"==t[o].type&&t[o].title.replace(/\s+/g,"-").toLowerCase()==i){var l=t[o].content;l=l.indexOf("<!--more-->")>-1?"<p><b menu-animation="+i+' class="main_head">'+t[o].title+"</b>"+l.replace(/<!--more-->/g,"<br><em class=readmore>read more</em>"):"<p><b menu-animation="+i+' class="main_head">'+t[o].title+"</b>"+l,r=content_string_assemble(l,i)}if("post"==t[o].type&&t[o].terms.category[0].slug==i){var c=t[o].content;c=c.indexOf("<!--more-->")>-1?"<p><b menu-animation="+t[o].title.replace(/\s+/g,"-").toLowerCase()+' class="main_head">'+t[o].title+"</b>"+c.replace(/<!--more-->/g,"<br><em class=readmore>read more</em>"):"<p><b menu-animation="+t[o].title.replace(/\s+/g,"-").toLowerCase()+' class="main_head">'+t[o].title+"</b>"+c,s+=content_string_assemble(c,i)}a=r+s}return'<div class="page_content" last-margin>'+a+"</div>"})}}]),WpApp.service("menuDataPhone",["mainData",function(e){this.getMenuItemsPhone=function(){return e.responseFunction(function(e){}).then(function(e){for(var n=e.data,t="",i=0,a=0;i<n.length;i++)if("page"==n[i].type){var r=n[i].title.replace(/\s+/g,"-").toLowerCase(),s=n[i].title,o=n[i].meta.hover_photo.url;t+='<div phone-menu-animation phone-menu-css="'+a+'" menu-item-name='+r+' class="projects phone '+r+'"><a ng-href='+r+'><div class="over"></div><p class="pro_p">'+s+'</p><div class="arrow"><img src="images/right_arrow-128.png" /></div><div class="hover_ph phone"><img ng-src="'+o+'" /></div><div class="under"></div></a></div>',a++}return t})}}]),WpApp.service("menuCurrentPhone",["$location","mainData",function(e,n){this.getCurrentMenuItemPhone=function(){return n.responseFunction(function(e){}).then(function(n){for(var t=n.data,i=null,a=e.url().slice(1).replace(/\/[^\/]+$/,""),r=0,s=0;r<t.length;r++)if("page"==t[r].type){var o=t[r].title.replace(/\s+/g,"-").toLowerCase();a===o&&(i=s),s++}return i})}}]),WpApp.directive("menu",function(e){return{link:function(n,t,i){n.$watch(i.menu,function(i){t.html(i),e(t.contents())(n)})}}}),WpApp.directive("wholeContent",function(e){return{link:function(n,t,i){n.$watch(i.wholeContent,function(i){t.html(i),e(t.contents())(n)})}}}),WpApp.directive("menuItemsHover",function(){return function(e,n,t){"/"==location.pathname&&(n.bind("mouseenter",function(e){n.parent().prev().children().attr("src",t.menuItemsHover)}),n.bind("mouseleave",function(e){n.parent().prev().children().removeAttr("src")}))}}),WpApp.directive("extraMargin",function(){return function(e,n,t){0!=n.find(".main_head").length?n.parent().addClass("mar_head"):n.parent().addClass("marg_normal")}}),WpApp.directive("spinnerGone",function(e,n,t){return function(e,i,a){t.responseFunction(function(e){}).then(function(e){n(function(){i.addClass("displaynone")},0)})}}),WpApp.directive("singleBlock",function(){return function(e,n,t){""===n.find("p").text()&&n.find("p").remove(),void 0!==n.find("a").attr("href")&&"http://ninalieven.net/wordpress/"===n.find("a").attr("href").substring(0,32)&&n.find("a").contents().unwrap(),n.find("a").attr("target","_blank"),n.find("img").parent().hasClass("more")&&n.find("img").unwrap()}}),WpApp.directive("iframe",function(e){return function(n,t){var i=angular.element(e),a=t.find("iframe").attr("width"),r=t.find("iframe").attr("height");n.getWindowDimensions=function(){return{h:i.height()}},n.$watch(n.getWindowDimensions,function(e,n){if(e.h<1500)var i=.7*e.h*a/r;else var i=1050*a/r;t.css("width",i+3)},!0),i.bind("resize",function(){n.$apply()})}}),WpApp.directive("iframeScroll",function(e,n){return function(t,i){var a=angular.element(e);navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&a.bind("scroll",function(){n.cancel($.data(this,"scrollTimer")),$.data(this,"scrollTimer",n(function(){i.bind("mousemove",function(){i.find("iframe").css("z-index",1)});var e=null;i.bind("mousemove",function(){n.cancel(e),e=n(function(){i.find("iframe").css("z-index",-1)},1500)})},250))})}}),WpApp.directive("imgFix",function(e){return function(n,t){var i=angular.element(e),a=t.find("img").attr("width"),r=t.find("img").attr("height");n.getWindowDimensions=function(){return{h:i.height()}},n.$watch(n.getWindowDimensions,function(e,n){if(e.h<1500)var i=.7*e.h*a/r+22;else var i=1050*a/r+22;t.css("width",i),t.find(".wp-caption").css("width",i-22)},!0),i.bind("resize",function(){n.$apply()})}}),WpApp.directive("textBlock",function(e){return function(n,t){var i=angular.element(e),a=t.find(".english");t.find(".readmore");t.find("br").replaceWith('<p class="specialps"></p>'),n.trackHeightChanges=function(){return{text_height:a.height(),box_height:t.height()}},n.$watch(n.trackHeightChanges,function(e,n){var i=getRows(e.text_height,a),r=getRows(e.box_height,t),s=i/r,o=Math.ceil(s);0===o&&(o=1),t.css({width:400*o+40*o,"max-width":600*o+40*o,"min-width":400*o+40*o})},!0),setInterval(function(){n.$apply()},0),i.bind("resize",function(){n.$apply()});var r=0;$(".change_language").bind("click",function(){r+=1,r%=2,1===r?(a=t.find(".german"),n.$apply()):(a=t.find(".english"),n.$apply())})}}),WpApp.directive("textLanguage",function(e,n,t){return function(i,a,r){var s=a.find("span"),o=a.find(".main_head");a.find("p");s.css("text-decoration","none"),a.find(".english").children().hasClass("main_head")===!0&&(o.insertBefore(o.parent()),german_language_stringIE(a)),route_language_change(a);var l=a.find(".readmore");l.bind("click",function(){l.parent().find(".more").slideDown(1200,function(){l.parent().find(".more").contents().unwrap(),i.$apply()}),l.slideUp(1200),l.prev().slideUp(1200)}),t(function(){var t=e.url().slice(1).replace(/\/[^\/]+$/,""),r=a[0].childNodes[0].innerHTML.replace(/\s+/g,"-").toLowerCase(),s=a[0].offsetLeft;void 0!=n.post&&move_left(n.post,r,s,1e3),$("html, body").scrollLeft(0),i.$on("$routeChangeStart",function(n,i){t===i.params.page&&(void 0!==i.params.post?(s=a[0].offsetLeft,e.update_path(t+"/"+i.params.post,!0),move_left(i.params.post,r,s,0)):(s=a[0].offsetLeft,e.update_path(t,!0),move_left(t,r,s,0)))})},0)}}),WpApp.directive("languageButton",function(){return function(e,n,t){var i=0;n.bind("click",function(){i+=1,i%=2,$(".english").each(function(){1===i?(n.text("en"),$(".readmore").text("mehr lesen"),$(this).next().hasClass("german")&&($(this).addClass("displaynone"),$(this).next().removeClass("displaynone"))):(n.text("de"),$(".readmore").text("read more"),$(this).next().hasClass("german")&&($(this).removeClass("displaynone"),$(this).next().addClass("displaynone")))})})}}),WpApp.directive("lastMargin",function(e){return function(n,t,i){var a=angular.element(e);n.getWindowDimensions=function(){return{w:a[0].innerWidth}},n.$watch(n.getWindowDimensions,function(e,n){t.children().last().children().hasClass("main_head")&&t.children().last().css("margin-right",e.w-660)},!0),a.bind("resize",function(){n.$apply()})}});var $=require("jquery"),content_string_assemble=function(e,n){for(var t=[],i=[],a="",e=$(e),r=0;r<e.length;r++)if("#text"!=e[r].nodeName&&($(e[r]).context.innerHTML.indexOf("img")>-1&&($(e[r]).context.innerHTML.indexOf("wp-caption-text")>-1?$(e[r]).find("img").parent().parent().wrap("<div class='wp-caption'></div>"):$(e[r]).find("img").wrap("<div class='wp-caption'></div>")),$(e[r]).context.innerHTML.indexOf("iframe")>-1&&$(e[r]).find("iframe").wrap("<div class='wp-caption'></div>"),$(e[r]).context.innerHTML.indexOf("img")>-1&&-1==$(e[r]).context.innerHTML.indexOf("main_head")&&t.push({el:"<div class=pstog single-block img-fix iframe-scroll>"+$(e[r]).context.outerHTML,ind:"ima"}),$(e[r]).context.innerHTML.indexOf("iframe")>-1&&-1==$(e[r]).context.innerHTML.indexOf("main_head")&&t.push({el:"<div class=pstog single-block iframe iframe-scroll>"+$(e[r]).context.outerHTML,ind:"ima"}),"p"==$(e[r]).context.localName&&"&nbsp;"!=$(e[r]).context.innerHTML&&-1==$(e[r]).context.innerHTML.indexOf("img")&&-1==$(e[r]).context.innerHTML.indexOf("iframe")))if((null==$(e[r]).context.previousElementSibling||"&nbsp;"==$(e[r]).context.previousElementSibling.innerHTML||$(e[r]).context.previousElementSibling.innerHTML.indexOf("img")>-1||$(e[r]).context.previousElementSibling.innerHTML.indexOf("iframe")>-1)&&(null!=$(e[r]).context.nextElementSibling&&"&nbsp;"!=$(e[r]).context.nextElementSibling.innerHTML&&"p"==$(e[r]).context.nextElementSibling.localName||null==$(e[r]).context.nextElementSibling||"&nbsp;"==$(e[r]).context.nextElementSibling.innerHTML||$(e[r]).context.nextElementSibling.innerHTML.indexOf("img")>-1||$(e[r]).context.nextElementSibling.innerHTML.indexOf("iframe")>-1))GetIEVersion()>0||/Edge\/\d+/i.test(navigator.userAgent)?t.push({el:'<div class="pstog'+r+"-"+n+' text_box" text-block text-language iframe-scroll><p class="english" extra-margin'+$(e[r]).context.outerHTML.substr(2)+"</b>",ind:r}):t.push({el:'<div class="pstog'+r+"-"+n+' text_box" text-block text-language iframe-scroll><p class="english" extra-margin'+$(e[r]).context.outerHTML.substr(2),ind:r});else{var s=$(e[r]).context.outerHTML,o=s.substring(3,s.length-4);i.push({el:o,ind:r})}for(var l=[],c=t.length-1;c>=0;c--)"ima"!=t[c].ind&&l.push(t[c].ind);for(var p=l,u=null,d=[],g=0;g<i.length;g++){var f=i[g].ind;$.each(p,function(){f>=this&&(null==u||f-u>f-this)&&(u=this)}),d.push({index:u,element:i[g].el})}for(var m=0;m<t.length;m++)for(var h=0;h<d.length;h++)d[h].index==t[m].ind?t[m].el=t[m].el.slice(0,-4)+"<br>"+d[h].element.replace('<em class="readmore">read more</em>','<em class="readmore">read more</em><em class=more>')+"</p>":t[m].el=t[m].el;for(var m=0;m<t.length;m++)a+=t[m].el+"</em></div>";return a},move_left=function(e,n,t,i){n===e&&(navigator.userAgent.toLowerCase().indexOf("chrome")>-1?$("body").delay(i).animate({scrollLeft:t-200},1e3):$("body, html").delay(i).animate({scrollLeft:t-200},1e3))},getRows=function(e,n){var t=e,i=$(n).css("font-size"),a=1.15,r=Math.floor(parseInt(i)*a),s=t/r;return num_rows=Math.round(s)},phone_menu=function(e,n,t,i,a,r,s){$("section").css("margin-top",a+20);var o=parseInt(t);r===o?(e.find("a").attr("href",""),e.find(".arrow").addClass("arr_down"),e.animate({top:0},s,function(){e.find("a").attr("href","/")})):o>r?e.animate({top:$(window).height()+a*o},s):e.animate({top:-((r-o)*a)},s)},phone_menu_home=function(e,n,t,i){$("section").css("margin-top",0),e.find(".arrow").removeClass("arr_down"),e.animate({top:t*n},1e3,function(){e.find("a").attr("href",i)})},route_language_change=function(e){"de"===$(".change_language").text()?null!==e.find(".english")[0].nextSibling&&(e.find(".german").addClass("displaynone"),e.find(".english").removeClass("displaynone")):null!==e.find(".english")[0].nextSibling&&(e.find(".english").addClass("displaynone"),e.find(".german").removeClass("displaynone"))},german_language_string=function(e){var n=e[0].innerHTML,t=n.substring(n.indexOf("<br><span"));if('<p class="english" extra-margin=""></p>'===n.slice(-39))var i="";else if(t.indexOf("<br><span")>-1){var i=n.substring(n.indexOf('<p class="english" extra-margin="">')+35,n.indexOf("<br><span"));if(e.children().hasClass("main_head")===!1)var a='<p class="german">'+t.substr(4);else var a='<p class="german">'+t;e.find(".english").empty().append(i).after(a)}else{var i=n.substring(n.indexOf('<p class="english" extra-margin="">')+35);e.find(".english").empty().append(i)}},german_language_stringIE=function(e){var n=e[0].innerHTML,t=n.substring(n.indexOf("<br><span"));if('<p class="english" extra-margin=""></p>'===n.slice(-39))var i="";else if(t.indexOf("<br><span")>-1){var i=n.substring(n.indexOf('<p class="english" extra-margin="">')+35,n.indexOf("<br><span")),a='<p class="german">'+t;e.find(".english").empty().append(i).after(a);for(var r=e.context.children[1].children,s=0;s<r.length;s++)"SPAN"===$(r[s]).context.nodeName&&r[s].remove()}else{var i=n.substring(n.indexOf('<p class="english" extra-margin="">')+35);e.find(".english").empty().append(i)}},jQuery=require("jquery");!function(e){function n(n){var t=n||window.event,i=[].slice.call(arguments,1),a=0,r=0,s=0;return n=e.event.fix(t),n.type="mousewheel",t.wheelDelta&&(a=t.wheelDelta/120),t.detail&&(a=-t.detail/3),s=a,void 0!==t.axis&&t.axis===t.HORIZONTAL_AXIS&&(s=0,r=-1*a),void 0!==t.wheelDeltaY&&(s=t.wheelDeltaY/120),void 0!==t.wheelDeltaX&&(r=-1*t.wheelDeltaX/120),i.unshift(n,a,r,s),(e.event.dispatch||e.event.handle).apply(this,i)}var t=["DOMMouseScroll","mousewheel"];if(e.event.fixHooks)for(var i=t.length;i;)e.event.fixHooks[t[--i]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=t.length;e;)this.addEventListener(t[--e],n,!1);else this.onmousewheel=n},teardown:function(){if(this.removeEventListener)for(var e=t.length;e;)this.removeEventListener(t[--e],n,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(jQuery);